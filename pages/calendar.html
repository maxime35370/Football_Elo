<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calendrier - Football Elo</title>
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="../css/calendar.css">
</head>
<body>
    <header>
        <h1>âš½ Football Elo</h1>
        <p>Calendrier & PrÃ©dictions</p>
    </header>

    <nav>
        <div class="nav-container">
            <a href="../index.html" class="nav-btn">ğŸ  Accueil</a>
            <a href="add-match.html" class="nav-btn">â• Ajouter un match</a>
            <a href="matches.html" class="nav-btn">ğŸ“‹ Historique</a>
            <a href="results-table.html" class="nav-btn">ğŸ“Š Tableau</a>
            <a href="rankings.html" class="nav-btn">ğŸ† Classements</a>
            <a href="statistics.html" class="nav-btn">ğŸ“ˆ Stats</a>
            <a href="calendar.html" class="nav-btn active">ğŸ“… Calendrier</a>           
            <a href="pronostics-game.html" class="nav-btn">ğŸ® Pronos</a>
            <a href="archives.html" class="nav-btn">ğŸ“š Archives</a>
            <a href="admin/teams-manager.html" class="nav-btn">âš™ï¸ Admin</a>
        </div>
    </nav>

    <main>
        <div class="calendar-container">
            
            <!-- En-tÃªte avec sÃ©lecteur de saison -->
            <div class="calendar-header">
                <h2>ğŸ“… Calendrier de la saison</h2>
                <div class="header-controls">
                    <div class="control-group">
                        <label for="seasonSelect">Saison :</label>
                        <select id="seasonSelect">
                            <option value="">Chargement...</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- Mode crÃ©ation manuelle -->
            <div id="manualCreationSection" class="manual-creation-section" style="display: none;">
                <div class="manual-header">
                    <h3>âœï¸ CrÃ©ation manuelle du calendrier</h3>
                    <button id="closeManualMode" class="btn-close">âœ• Fermer</button>
                </div>
                
                <div class="manual-controls">
                    <div class="control-group">
                        <label for="manualMatchDay">JournÃ©e :</label>
                        <select id="manualMatchDay">
                            <!-- GÃ©nÃ©rÃ© dynamiquement -->
                        </select>
                    </div>
                    <div class="match-counter">
                        <span id="matchCounter">0</span> / <span id="maxMatches">9</span> matchs
                    </div>
                </div>
                <div class="bulk-datetime">
                    <label>ğŸ“… Appliquer Ã  tous :</label>
                    <input type="datetime-local" id="bulkDatetime">
                    <button type="button" class="btn-secondary" onclick="applyBulkDatetime()">Appliquer</button>
                </div>
                
                <div class="manual-content">
                    <!-- Ã‰quipes disponibles -->
                    <div class="teams-selection">
                        <h4>Ã‰quipes disponibles</h4>
                        <p class="selection-hint" id="selectionHint">Cliquez sur l'Ã©quipe Ã  <strong>domicile</strong></p>
                        <div id="availableTeams" class="teams-grid">
                            <!-- GÃ©nÃ©rÃ© dynamiquement -->
                        </div>
                    </div>
                    
                    <!-- Matchs crÃ©Ã©s -->
                    <div class="created-matches">
                        <h4>Matchs de la journÃ©e</h4>
                        <div id="createdMatchesList" class="created-matches-list">
                            <!-- GÃ©nÃ©rÃ© dynamiquement -->
                        </div>
                    </div>
                </div>
                
                <div class="manual-actions">
                    <button id="saveManualMatches" class="btn btn-primary">ğŸ’¾ Sauvegarder la journÃ©e</button>
                    <button id="clearManualMatches" class="btn btn-secondary">â†©ï¸ RÃ©initialiser la journÃ©e</button>
                </div>
            </div>

            <!-- Actions calendrier -->
            <div class="calendar-actions">
                <button id="generateCalendarBtn" class="btn btn-primary">
                    ğŸ”„ GÃ©nÃ©rer automatiquement
                </button>
                <button id="manualModeBtn" class="btn btn-secondary">
                    âœï¸ CrÃ©ation manuelle
                </button>
                <button id="clearFutureMatchesBtn" class="btn btn-danger">
                    ğŸ—‘ï¸ Supprimer les matchs Ã  venir
                </button>
                <span class="calendar-status" id="calendarStatus"></span>
            </div>

            <!-- Onglets -->
            <div class="calendar-tabs">
                <button class="calendar-tab active" data-tab="schedule">ğŸ“… Calendrier</button>
                <button class="calendar-tab" data-tab="difficulty">ğŸ¯ DifficultÃ©</button>
                <button class="calendar-tab" data-tab="objectives">ğŸ† Objectifs</button>
                <button class="calendar-tab" data-tab="simulation">ğŸ”® Simulation</button>
                <button class="calendar-tab" data-tab="predictions">ğŸ° Pronostics</button>
            </div>

            <!-- Contenu des onglets -->
            <div class="tab-content">
                
                <!-- Onglet Calendrier -->
                <div id="scheduleTab" class="tab-pane active">
                    <div class="schedule-controls">
                        <div class="control-group">
                            <label for="matchdayFilter">JournÃ©e :</label>
                            <select id="matchdayFilter">
                                <option value="all">Toutes</option>
                            </select>
                        </div>
                        <div class="control-group">
                            <label for="teamFilter">Ã‰quipe :</label>
                            <select id="teamFilter">
                                <option value="all">Toutes</option>
                            </select>
                        </div>
                        <div class="control-group">
                            <label for="statusFilter">Statut :</label>
                            <select id="statusFilter">
                                <option value="all">Tous</option>
                                <option value="played">JouÃ©s</option>
                                <option value="upcoming">Ã€ venir</option>
                            </select>
                        </div>
                    </div>
                    
                    <div id="scheduleContent" class="schedule-grid">
                        <!-- GÃ©nÃ©rÃ© dynamiquement -->
                    </div>
                </div>

                <!-- Onglet DifficultÃ© -->
                <div id="difficultyTab" class="tab-pane">
                    <div class="difficulty-intro">
                        <p>La difficultÃ© du calendrier restant est calculÃ©e en fonction du <strong>rating Elo</strong> des adversaires Ã  affronter.</p>
                    </div>
                    <div id="difficultyContent" class="difficulty-grid">
                        <!-- GÃ©nÃ©rÃ© dynamiquement -->
                    </div>
                </div>

                <!-- Onglet Objectifs -->
                <div id="objectivesTab" class="tab-pane">
                    <div class="objectives-intro">
                        <p>Calcul des points nÃ©cessaires pour atteindre chaque objectif de la saison.</p>
                    </div>
                    <div id="objectivesContent" class="objectives-grid">
                        <!-- GÃ©nÃ©rÃ© dynamiquement -->
                    </div>
                </div>

                <!-- Onglet Simulation -->
                <div id="simulationTab" class="tab-pane">
                    <div class="simulation-intro">
                        <p>Simulez la fin de saison en prÃ©disant les rÃ©sultats des matchs restants.</p>
                    </div>
                    <div class="simulation-controls">
                        <button id="simulateRandomBtn" class="btn">ğŸ² Simulation alÃ©atoire</button>
                        <button id="simulateEloBtn" class="btn btn-primary">ğŸ¯ Simulation basÃ©e sur Elo</button>
                        <button id="resetSimulationBtn" class="btn btn-secondary">â†©ï¸ RÃ©initialiser</button>
                    </div>
                    <div id="simulationContent" class="simulation-wrapper">
                        <!-- GÃ©nÃ©rÃ© dynamiquement -->
                    </div>
                </div>

                <!-- Onglet Pronostics -->
                <div id="predictionsTab" class="tab-pane">
                    <div class="predictions-header">
                        <h3 id="predictionsTitle">ğŸ° Pronostics - JournÃ©e X</h3>
                        <div class="predictions-actions">
                            <button id="generateAllPredictionsBtn" class="btn btn-primary">ğŸ”® GÃ©nÃ©rer tous les pronostics</button>
                            <button id="recalculatePredictionsBtn" class="btn btn-secondary">ğŸ”„ Recalculer</button>
                        </div>
                    </div>
                    <div class="predictions-nav-bar">
                        <button id="prevMatchdayBtn" class="btn-nav">â—€ JournÃ©e prÃ©cÃ©dente</button>
                        <button id="nextMatchdayBtn" class="btn-nav">JournÃ©e suivante â–¶</button>
                    </div>
                    <div class="predictions-intro">
                        <p>Les pronostics sont calculÃ©s en fonction de : <strong>Elo</strong>, <strong>forme rÃ©cente</strong>, 
                        <strong>enjeux</strong> (titre, Europe, maintien), <strong>adversaire direct</strong>, 
                        <strong>domicile/extÃ©rieur</strong>, et une <strong>part d'alÃ©atoire</strong>.</p>
                        <p><em>ğŸ’¡ Les pronostics des journÃ©es suivantes prennent en compte l'Ã©volution de l'Elo simulÃ©.</em></p>
                    </div>
                    <div id="predictionsContent" class="predictions-grid">
                        <!-- GÃ©nÃ©rÃ© dynamiquement -->
                    </div>

                    <!-- Classement final projetÃ© -->
                    <div id="finalRankingSection" class="final-ranking-section" style="display: none;">
                        <h3>ğŸ† Classement final projetÃ©</h3>
                        <p class="final-ranking-intro">Classement basÃ© sur les pronostics de toutes les journÃ©es restantes.</p>
                        <div id="finalRankingContent" class="final-ranking-wrapper">
                            <!-- GÃ©nÃ©rÃ© dynamiquement -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer>
        <p>&copy; 2025 Football Elo - Calendrier</p>
    </footer>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

    <!-- Scripts -->
    <script src="../js/firebase-config.js"></script>
    <script src="../js/firebase-service.js"></script>
    <script src="../js/seasons.js"></script>
    <script src="../js/teams-loader.js"></script>
    <script src="../js/storage.js"></script>
    <script src="../js/app.js"></script>
    <script src="../js/elo-system.js"></script>
    <!-- Calendar modules -->
    <script src="../js/calendar/calendar-core.js"></script>
    <script src="../js/calendar/calendar-schedule.js"></script>
    <script src="../js/calendar/calendar-generator.js"></script>
    <script src="../js/calendar/calendar-manual.js"></script>
    <script src="../js/calendar/calendar-difficulty.js"></script>
    <script src="../js/calendar/calendar-objectives.js"></script>
    <script src="../js/calendar/calendar-simulation.js"></script>
    <script src="../js/calendar/calendar-predictions.js"></script>
    </body>
</html>